name: Build and Test Web App
on: [push]

jobs:
  build:
    name: Build Job
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4 

      - name: Run build commands
        run: |
          echo "Starting the build process..."
          mkdir build_artifacts      # Create a directory for build files
          cp index.html build_artifacts/ # Copy the app into the directory
          echo "Build complete. Files in build_artifacts:"
          ls -l build_artifacts      # List the files to prove it worked

  test:
    name: Test Job
    runs-on: ubuntu-latest
    needs: build 
    steps:
      - name: 1. Check out code
        uses: actions/checkout@v4

      - name: 2. Run test commands
        run: |
          echo "Starting the test process..."
          
          # Test 1: Check if the file exists
          echo "Checking if index.html exists..."
          test -f "index.html"
          
          # Test 2: Check if the file contains the word "Welcome"
          echo "Checking for 'Welcome' in index.html..."
          grep -q "Welcome" index.html
          
          # Test 3: Check if the file contains the word "OWASP"
          echo "Checking for 'OWASP' in index.html..."
          grep -q "OWASP" index.html
          
          echo "All tests passed!"